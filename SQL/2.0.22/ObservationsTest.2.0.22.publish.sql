/*
Deployment script for ObservationsTest

This code was generated by a tool.
Changes to this file may cause incorrect behavior and will be lost if
the code is regenerated.
*/

GO
SET ANSI_NULLS, ANSI_PADDING, ANSI_WARNINGS, ARITHABORT, CONCAT_NULL_YIELDS_NULL, QUOTED_IDENTIFIER ON;

SET NUMERIC_ROUNDABORT OFF;


GO
:setvar DatabaseName "ObservationsTest"
:setvar DefaultFilePrefix "ObservationsTest"
:setvar DefaultDataPath "C:\Program Files\Microsoft SQL Server\MSSQL13.SAEON\MSSQL\DATA\"
:setvar DefaultLogPath "C:\Program Files\Microsoft SQL Server\MSSQL13.SAEON\MSSQL\DATA\"

GO
:on error exit
GO
/*
Detect SQLCMD mode and disable script execution if SQLCMD mode is not supported.
To re-enable the script after enabling SQLCMD mode, execute the following:
SET NOEXEC OFF; 
*/
:setvar __IsSqlCmdEnabled "True"
GO
IF N'$(__IsSqlCmdEnabled)' NOT LIKE N'True'
    BEGIN
        PRINT N'SQLCMD mode must be enabled to successfully execute this script.';
        SET NOEXEC ON;
    END


GO
USE [$(DatabaseName)];


GO
PRINT N'Dropping [dbo].[DataSource].[IX_DataSource_EndDate]...';


GO
DROP INDEX [IX_DataSource_EndDate]
    ON [dbo].[DataSource];


GO
PRINT N'Dropping [dbo].[DataSource].[IX_DataSource_StartDate]...';


GO
DROP INDEX [IX_DataSource_StartDate]
    ON [dbo].[DataSource];


GO
PRINT N'Dropping [dbo].[DataSourceTransformation].[IX_DataSourceTransformation_EndDate]...';


GO
DROP INDEX [IX_DataSourceTransformation_EndDate]
    ON [dbo].[DataSourceTransformation];


GO
PRINT N'Dropping [dbo].[DataSourceTransformation].[IX_DataSourceTransformation_StartDate]...';


GO
DROP INDEX [IX_DataSourceTransformation_StartDate]
    ON [dbo].[DataSourceTransformation];


GO
PRINT N'Dropping [dbo].[Instrument].[IX_Instrument_EndDate]...';


GO
DROP INDEX [IX_Instrument_EndDate]
    ON [dbo].[Instrument];


GO
PRINT N'Dropping [dbo].[Instrument].[IX_Instrument_StartDate]...';


GO
DROP INDEX [IX_Instrument_StartDate]
    ON [dbo].[Instrument];


GO
PRINT N'Dropping [dbo].[Instrument_DataSource].[IX_Instrument_DataSource_EndDate]...';


GO
DROP INDEX [IX_Instrument_DataSource_EndDate]
    ON [dbo].[Instrument_DataSource];


GO
PRINT N'Dropping [dbo].[Instrument_DataSource].[IX_Instrument_DataSource_StartDate]...';


GO
DROP INDEX [IX_Instrument_DataSource_StartDate]
    ON [dbo].[Instrument_DataSource];


GO
PRINT N'Dropping [dbo].[Instrument_Sensor].[IX_Instrument_Sensor_EndDate]...';


GO
DROP INDEX [IX_Instrument_Sensor_EndDate]
    ON [dbo].[Instrument_Sensor];


GO
PRINT N'Dropping [dbo].[Instrument_Sensor].[IX_Instrument_Sensor_StartDate]...';


GO
DROP INDEX [IX_Instrument_Sensor_StartDate]
    ON [dbo].[Instrument_Sensor];


GO
PRINT N'Dropping [dbo].[Organisation_Instrument].[IX_Organisation_Instrument_EndDate]...';


GO
DROP INDEX [IX_Organisation_Instrument_EndDate]
    ON [dbo].[Organisation_Instrument];


GO
PRINT N'Dropping [dbo].[Organisation_Instrument].[IX_Organisation_Instrument_StartDate]...';


GO
DROP INDEX [IX_Organisation_Instrument_StartDate]
    ON [dbo].[Organisation_Instrument];


GO
PRINT N'Dropping [dbo].[Organisation_Site].[IX_Organisation_Site_EndDate]...';


GO
DROP INDEX [IX_Organisation_Site_EndDate]
    ON [dbo].[Organisation_Site];


GO
PRINT N'Dropping [dbo].[Organisation_Site].[IX_Organisation_Site_StartDate]...';


GO
DROP INDEX [IX_Organisation_Site_StartDate]
    ON [dbo].[Organisation_Site];


GO
PRINT N'Dropping [dbo].[Organisation_Station].[IX_Organisation_Station_EndDate]...';


GO
DROP INDEX [IX_Organisation_Station_EndDate]
    ON [dbo].[Organisation_Station];


GO
PRINT N'Dropping [dbo].[Organisation_Station].[IX_Organisation_Station_StartDate]...';


GO
DROP INDEX [IX_Organisation_Station_StartDate]
    ON [dbo].[Organisation_Station];


GO
PRINT N'Dropping [dbo].[Programme].[IX_Programme_EndDate]...';


GO
DROP INDEX [IX_Programme_EndDate]
    ON [dbo].[Programme];


GO
PRINT N'Dropping [dbo].[Programme].[IX_Programme_StartDate]...';


GO
DROP INDEX [IX_Programme_StartDate]
    ON [dbo].[Programme];


GO
PRINT N'Dropping [dbo].[Project].[IX_Project_EndDate]...';


GO
DROP INDEX [IX_Project_EndDate]
    ON [dbo].[Project];


GO
PRINT N'Dropping [dbo].[Project].[IX_Project_StartDate]...';


GO
DROP INDEX [IX_Project_StartDate]
    ON [dbo].[Project];


GO
PRINT N'Dropping [dbo].[Project_Station].[IX_Project_Station_EndDate]...';


GO
DROP INDEX [IX_Project_Station_EndDate]
    ON [dbo].[Project_Station];


GO
PRINT N'Dropping [dbo].[Project_Station].[IX_Project_Station_StartDate]...';


GO
DROP INDEX [IX_Project_Station_StartDate]
    ON [dbo].[Project_Station];


GO
PRINT N'Dropping [dbo].[Site].[IX_Site_EndDate]...';


GO
DROP INDEX [IX_Site_EndDate]
    ON [dbo].[Site];


GO
PRINT N'Dropping [dbo].[Site].[IX_Site_StartDate]...';


GO
DROP INDEX [IX_Site_StartDate]
    ON [dbo].[Site];


GO
PRINT N'Dropping [dbo].[Station_Instrument].[IX_Station_Instrument_EndDate]...';


GO
DROP INDEX [IX_Station_Instrument_EndDate]
    ON [dbo].[Station_Instrument];


GO
PRINT N'Dropping [dbo].[Station_Instrument].[IX_Station_Instrument_StartDate]...';


GO
DROP INDEX [IX_Station_Instrument_StartDate]
    ON [dbo].[Station_Instrument];


GO
PRINT N'Dropping [dbo].[UX_DataSourceTransformation]...';


GO
ALTER TABLE [dbo].[DataSourceTransformation] DROP CONSTRAINT [UX_DataSourceTransformation];


GO
PRINT N'Dropping [dbo].[UX_Instrument_DataSource]...';


GO
ALTER TABLE [dbo].[Instrument_DataSource] DROP CONSTRAINT [UX_Instrument_DataSource];


GO
PRINT N'Dropping [dbo].[UX_Instrument_Sensor]...';


GO
ALTER TABLE [dbo].[Instrument_Sensor] DROP CONSTRAINT [UX_Instrument_Sensor];


GO
PRINT N'Dropping [dbo].[UX_Organisation_Instrument]...';


GO
ALTER TABLE [dbo].[Organisation_Instrument] DROP CONSTRAINT [UX_Organisation_Instrument];


GO
PRINT N'Dropping [dbo].[UX_Organisation_Site]...';


GO
ALTER TABLE [dbo].[Organisation_Site] DROP CONSTRAINT [UX_Organisation_Site];


GO
PRINT N'Dropping [dbo].[UX_Organisation_Station]...';


GO
ALTER TABLE [dbo].[Organisation_Station] DROP CONSTRAINT [UX_Organisation_Station];


GO
PRINT N'Dropping [dbo].[UX_Project_Station]...';


GO
ALTER TABLE [dbo].[Project_Station] DROP CONSTRAINT [UX_Project_Station];


GO
PRINT N'Dropping [dbo].[UX_Station_Instrument]...';


GO
ALTER TABLE [dbo].[Station_Instrument] DROP CONSTRAINT [UX_Station_Instrument];


GO
PRINT N'Altering [dbo].[DataSource]...';


GO
ALTER TABLE [dbo].[DataSource] ALTER COLUMN [EndDate] DATE NULL;

ALTER TABLE [dbo].[DataSource] ALTER COLUMN [StartDate] DATE NULL;


GO
PRINT N'Creating [dbo].[DataSource].[IX_DataSource_EndDate]...';


GO
CREATE NONCLUSTERED INDEX [IX_DataSource_EndDate]
    ON [dbo].[DataSource]([EndDate] ASC);


GO
PRINT N'Creating [dbo].[DataSource].[IX_DataSource_StartDate]...';


GO
CREATE NONCLUSTERED INDEX [IX_DataSource_StartDate]
    ON [dbo].[DataSource]([StartDate] ASC);


GO
PRINT N'Altering [dbo].[DataSourceTransformation]...';


GO
ALTER TABLE [dbo].[DataSourceTransformation] ALTER COLUMN [EndDate] DATE NULL;

ALTER TABLE [dbo].[DataSourceTransformation] ALTER COLUMN [StartDate] DATE NULL;


GO
PRINT N'Creating [dbo].[UX_DataSourceTransformation]...';


GO
ALTER TABLE [dbo].[DataSourceTransformation]
    ADD CONSTRAINT [UX_DataSourceTransformation] UNIQUE NONCLUSTERED ([DataSourceID] ASC, [SensorID] ASC, [Rank] ASC, [TransformationTypeID] ASC, [PhenomenonID] ASC, [PhenomenonOfferingID] ASC, [PhenomenonUOMID] ASC, [NewPhenomenonOfferingID] ASC, [NewPhenomenonUOMID] ASC, [StartDate] ASC, [EndDate] ASC);


GO
PRINT N'Creating [dbo].[DataSourceTransformation].[IX_DataSourceTransformation_EndDate]...';


GO
CREATE NONCLUSTERED INDEX [IX_DataSourceTransformation_EndDate]
    ON [dbo].[DataSourceTransformation]([DataSourceID] ASC, [EndDate] ASC);


GO
PRINT N'Creating [dbo].[DataSourceTransformation].[IX_DataSourceTransformation_StartDate]...';


GO
CREATE NONCLUSTERED INDEX [IX_DataSourceTransformation_StartDate]
    ON [dbo].[DataSourceTransformation]([DataSourceID] ASC, [StartDate] ASC);


GO
PRINT N'Altering [dbo].[Instrument]...';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER OFF;


GO
ALTER TABLE [dbo].[Instrument] ALTER COLUMN [EndDate] DATE NULL;

ALTER TABLE [dbo].[Instrument] ALTER COLUMN [StartDate] DATE NULL;


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER ON;


GO
PRINT N'Creating [dbo].[Instrument].[IX_Instrument_EndDate]...';


GO
CREATE NONCLUSTERED INDEX [IX_Instrument_EndDate]
    ON [dbo].[Instrument]([EndDate] ASC);


GO
PRINT N'Creating [dbo].[Instrument].[IX_Instrument_StartDate]...';


GO
CREATE NONCLUSTERED INDEX [IX_Instrument_StartDate]
    ON [dbo].[Instrument]([StartDate] ASC);


GO
PRINT N'Altering [dbo].[Instrument_DataSource]...';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER OFF;


GO
ALTER TABLE [dbo].[Instrument_DataSource] ALTER COLUMN [EndDate] DATE NULL;

ALTER TABLE [dbo].[Instrument_DataSource] ALTER COLUMN [StartDate] DATE NULL;


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER ON;


GO
PRINT N'Creating [dbo].[UX_Instrument_DataSource]...';


GO
ALTER TABLE [dbo].[Instrument_DataSource]
    ADD CONSTRAINT [UX_Instrument_DataSource] UNIQUE NONCLUSTERED ([InstrumentID] ASC, [DataSourceID] ASC, [StartDate] ASC, [EndDate] ASC);


GO
PRINT N'Creating [dbo].[Instrument_DataSource].[IX_Instrument_DataSource_EndDate]...';


GO
CREATE NONCLUSTERED INDEX [IX_Instrument_DataSource_EndDate]
    ON [dbo].[Instrument_DataSource]([EndDate] ASC);


GO
PRINT N'Creating [dbo].[Instrument_DataSource].[IX_Instrument_DataSource_StartDate]...';


GO
CREATE NONCLUSTERED INDEX [IX_Instrument_DataSource_StartDate]
    ON [dbo].[Instrument_DataSource]([StartDate] ASC);


GO
PRINT N'Altering [dbo].[Instrument_Sensor]...';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER OFF;


GO
ALTER TABLE [dbo].[Instrument_Sensor] ALTER COLUMN [EndDate] DATE NULL;

ALTER TABLE [dbo].[Instrument_Sensor] ALTER COLUMN [StartDate] DATE NULL;


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER ON;


GO
PRINT N'Creating [dbo].[UX_Instrument_Sensor]...';


GO
ALTER TABLE [dbo].[Instrument_Sensor]
    ADD CONSTRAINT [UX_Instrument_Sensor] UNIQUE NONCLUSTERED ([InstrumentID] ASC, [SensorID] ASC, [StartDate] ASC, [EndDate] ASC);


GO
PRINT N'Creating [dbo].[Instrument_Sensor].[IX_Instrument_Sensor_EndDate]...';


GO
CREATE NONCLUSTERED INDEX [IX_Instrument_Sensor_EndDate]
    ON [dbo].[Instrument_Sensor]([EndDate] ASC);


GO
PRINT N'Creating [dbo].[Instrument_Sensor].[IX_Instrument_Sensor_StartDate]...';


GO
CREATE NONCLUSTERED INDEX [IX_Instrument_Sensor_StartDate]
    ON [dbo].[Instrument_Sensor]([StartDate] ASC);


GO
PRINT N'Altering [dbo].[Organisation_Instrument]...';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER OFF;


GO
ALTER TABLE [dbo].[Organisation_Instrument] ALTER COLUMN [EndDate] DATE NULL;

ALTER TABLE [dbo].[Organisation_Instrument] ALTER COLUMN [StartDate] DATE NULL;


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER ON;


GO
PRINT N'Creating [dbo].[UX_Organisation_Instrument]...';


GO
ALTER TABLE [dbo].[Organisation_Instrument]
    ADD CONSTRAINT [UX_Organisation_Instrument] UNIQUE NONCLUSTERED ([OrganisationID] ASC, [InstrumentID] ASC, [OrganisationRoleID] ASC, [StartDate] ASC, [EndDate] ASC);


GO
PRINT N'Creating [dbo].[Organisation_Instrument].[IX_Organisation_Instrument_EndDate]...';


GO
CREATE NONCLUSTERED INDEX [IX_Organisation_Instrument_EndDate]
    ON [dbo].[Organisation_Instrument]([EndDate] ASC);


GO
PRINT N'Creating [dbo].[Organisation_Instrument].[IX_Organisation_Instrument_StartDate]...';


GO
CREATE NONCLUSTERED INDEX [IX_Organisation_Instrument_StartDate]
    ON [dbo].[Organisation_Instrument]([StartDate] ASC);


GO
PRINT N'Altering [dbo].[Organisation_Site]...';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER OFF;


GO
ALTER TABLE [dbo].[Organisation_Site] ALTER COLUMN [EndDate] DATE NULL;

ALTER TABLE [dbo].[Organisation_Site] ALTER COLUMN [StartDate] DATE NULL;


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER ON;


GO
PRINT N'Creating [dbo].[UX_Organisation_Site]...';


GO
ALTER TABLE [dbo].[Organisation_Site]
    ADD CONSTRAINT [UX_Organisation_Site] UNIQUE NONCLUSTERED ([OrganisationID] ASC, [SiteID] ASC, [OrganisationRoleID] ASC, [StartDate] ASC, [EndDate] ASC);


GO
PRINT N'Creating [dbo].[Organisation_Site].[IX_Organisation_Site_EndDate]...';


GO
CREATE NONCLUSTERED INDEX [IX_Organisation_Site_EndDate]
    ON [dbo].[Organisation_Site]([EndDate] ASC);


GO
PRINT N'Creating [dbo].[Organisation_Site].[IX_Organisation_Site_StartDate]...';


GO
CREATE NONCLUSTERED INDEX [IX_Organisation_Site_StartDate]
    ON [dbo].[Organisation_Site]([StartDate] ASC);


GO
PRINT N'Altering [dbo].[Organisation_Station]...';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER OFF;


GO
ALTER TABLE [dbo].[Organisation_Station] ALTER COLUMN [EndDate] DATE NULL;

ALTER TABLE [dbo].[Organisation_Station] ALTER COLUMN [StartDate] DATE NULL;


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER ON;


GO
PRINT N'Creating [dbo].[UX_Organisation_Station]...';


GO
ALTER TABLE [dbo].[Organisation_Station]
    ADD CONSTRAINT [UX_Organisation_Station] UNIQUE NONCLUSTERED ([OrganisationID] ASC, [StationID] ASC, [OrganisationRoleID] ASC, [StartDate] ASC, [EndDate] ASC);


GO
PRINT N'Creating [dbo].[Organisation_Station].[IX_Organisation_Station_EndDate]...';


GO
CREATE NONCLUSTERED INDEX [IX_Organisation_Station_EndDate]
    ON [dbo].[Organisation_Station]([EndDate] ASC);


GO
PRINT N'Creating [dbo].[Organisation_Station].[IX_Organisation_Station_StartDate]...';


GO
CREATE NONCLUSTERED INDEX [IX_Organisation_Station_StartDate]
    ON [dbo].[Organisation_Station]([StartDate] ASC);


GO
PRINT N'Altering [dbo].[Programme]...';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER OFF;


GO
ALTER TABLE [dbo].[Programme] ALTER COLUMN [EndDate] DATE NULL;

ALTER TABLE [dbo].[Programme] ALTER COLUMN [StartDate] DATE NULL;


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER ON;


GO
PRINT N'Creating [dbo].[Programme].[IX_Programme_EndDate]...';


GO
CREATE NONCLUSTERED INDEX [IX_Programme_EndDate]
    ON [dbo].[Programme]([EndDate] ASC);


GO
PRINT N'Creating [dbo].[Programme].[IX_Programme_StartDate]...';


GO
CREATE NONCLUSTERED INDEX [IX_Programme_StartDate]
    ON [dbo].[Programme]([StartDate] ASC);


GO
PRINT N'Altering [dbo].[Project]...';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER OFF;


GO
ALTER TABLE [dbo].[Project] ALTER COLUMN [EndDate] DATE NULL;

ALTER TABLE [dbo].[Project] ALTER COLUMN [StartDate] DATE NULL;


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER ON;


GO
PRINT N'Creating [dbo].[Project].[IX_Project_EndDate]...';


GO
CREATE NONCLUSTERED INDEX [IX_Project_EndDate]
    ON [dbo].[Project]([EndDate] ASC);


GO
PRINT N'Creating [dbo].[Project].[IX_Project_StartDate]...';


GO
CREATE NONCLUSTERED INDEX [IX_Project_StartDate]
    ON [dbo].[Project]([StartDate] ASC);


GO
PRINT N'Altering [dbo].[Project_Station]...';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER OFF;


GO
ALTER TABLE [dbo].[Project_Station] ALTER COLUMN [EndDate] DATE NULL;

ALTER TABLE [dbo].[Project_Station] ALTER COLUMN [StartDate] DATE NULL;


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER ON;


GO
PRINT N'Creating [dbo].[UX_Project_Station]...';


GO
ALTER TABLE [dbo].[Project_Station]
    ADD CONSTRAINT [UX_Project_Station] UNIQUE NONCLUSTERED ([ProjectID] ASC, [StationID] ASC, [StartDate] ASC, [EndDate] ASC);


GO
PRINT N'Creating [dbo].[Project_Station].[IX_Project_Station_EndDate]...';


GO
CREATE NONCLUSTERED INDEX [IX_Project_Station_EndDate]
    ON [dbo].[Project_Station]([EndDate] ASC);


GO
PRINT N'Creating [dbo].[Project_Station].[IX_Project_Station_StartDate]...';


GO
CREATE NONCLUSTERED INDEX [IX_Project_Station_StartDate]
    ON [dbo].[Project_Station]([StartDate] ASC);


GO
PRINT N'Altering [dbo].[Site]...';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER OFF;


GO
ALTER TABLE [dbo].[Site] ALTER COLUMN [EndDate] DATE NULL;

ALTER TABLE [dbo].[Site] ALTER COLUMN [StartDate] DATE NULL;


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER ON;


GO
PRINT N'Creating [dbo].[Site].[IX_Site_EndDate]...';


GO
CREATE NONCLUSTERED INDEX [IX_Site_EndDate]
    ON [dbo].[Site]([EndDate] ASC);


GO
PRINT N'Creating [dbo].[Site].[IX_Site_StartDate]...';


GO
CREATE NONCLUSTERED INDEX [IX_Site_StartDate]
    ON [dbo].[Site]([StartDate] ASC);


GO
PRINT N'Altering [dbo].[Station]...';


GO
ALTER TABLE [dbo].[Station] ALTER COLUMN [EndDate] DATE NULL;

ALTER TABLE [dbo].[Station] ALTER COLUMN [StartDate] DATE NULL;


GO
PRINT N'Altering [dbo].[Station_Instrument]...';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER OFF;


GO
ALTER TABLE [dbo].[Station_Instrument] ALTER COLUMN [EndDate] DATE NULL;

ALTER TABLE [dbo].[Station_Instrument] ALTER COLUMN [StartDate] DATE NULL;


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER ON;


GO
PRINT N'Creating [dbo].[UX_Station_Instrument]...';


GO
ALTER TABLE [dbo].[Station_Instrument]
    ADD CONSTRAINT [UX_Station_Instrument] UNIQUE NONCLUSTERED ([StationID] ASC, [InstrumentID] ASC, [StartDate] ASC, [EndDate] ASC);


GO
PRINT N'Creating [dbo].[Station_Instrument].[IX_Station_Instrument_EndDate]...';


GO
CREATE NONCLUSTERED INDEX [IX_Station_Instrument_EndDate]
    ON [dbo].[Station_Instrument]([EndDate] ASC);


GO
PRINT N'Creating [dbo].[Station_Instrument].[IX_Station_Instrument_StartDate]...';


GO
CREATE NONCLUSTERED INDEX [IX_Station_Instrument_StartDate]
    ON [dbo].[Station_Instrument]([StartDate] ASC);


GO
PRINT N'Refreshing [dbo].[vDataSource]...';


GO
EXECUTE sp_refreshsqlmodule N'[dbo].[vDataSource]';


GO
PRINT N'Refreshing [dbo].[vDataSourceRole]...';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER OFF;


GO
EXECUTE sp_refreshsqlmodule N'[dbo].[vDataSourceRole]';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER ON;


GO
PRINT N'Refreshing [dbo].[vDataSourceTransformation]...';


GO
EXECUTE sp_refreshsqlmodule N'[dbo].[vDataSourceTransformation]';


GO
PRINT N'Refreshing [dbo].[vImportBatch]...';


GO
EXECUTE sp_refreshsqlmodule N'[dbo].[vImportBatch]';


GO
PRINT N'Refreshing [dbo].[vInstrumentDataSource]...';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER OFF;


GO
EXECUTE sp_refreshsqlmodule N'[dbo].[vInstrumentDataSource]';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER ON;


GO
PRINT N'Altering [dbo].[vObservation]...';


GO
--> Changed 2.0.3 20160503 TimPN
--Renamed SensorProcedure to Sensor
--< Changed 2.0.3 20160503 TimPN
ALTER VIEW [dbo].[vObservation]
AS
--> Changed 2.0.16 20161107 TimPN
--> Changed 2.0.3 20160421 TimPN
--SELECT     o.ID, o.SensorID, o.PhenonmenonOfferingID, o.PhenonmenonUOMID, o.UserId, o.RawValue, o.DataValue, o.ImportBatchID, o.ValueDate, 
--SELECT     o.ID, o.SensorID, o.PhenomenonOfferingID, o.PhenomenonUOMID, o.UserId, o.RawValue, o.DataValue, o.ImportBatchID, o.ValueDate, 
--< Changed 2.0.3 20160421 TimPN
--                      sp.Code AS spCode, sp.Description AS spDesc, sp.Name AS spName, sp.Url AS spURL, sp.DataSchemaID, sp.DataSourceID, sp.PhenomenonID, sp.StationID, 
--                      ph.Name AS phName, st.Name AS stName, ds.Name AS dsName, ISNULL(dschema.Name,dschema1.Name) AS dschemaName, offer.Name AS offName, offer.ID AS offID, ps.Name AS psName, 
--                      ps.ID AS psID, org.Name AS orgName, org.ID AS orgID, uom.Unit AS uomUnit, uom.UnitSymbol AS uomSymbol, users.UserName,
--                      o.Comment
--FROM         dbo.Observation AS o INNER JOIN
--                      dbo.Sensor AS sp ON sp.ID = o.SensorID INNER JOIN
--                      dbo.Phenomenon AS ph ON ph.ID = sp.PhenomenonID INNER JOIN
--> Changed 2.0.3 20160421 TimPN
--                      dbo.PhenomenonOffering AS phOff ON phOff.ID = o.PhenonmenonOfferingID INNER JOIN  
--                      dbo.PhenomenonOffering AS phOff ON phOff.ID = o.PhenomenonOfferingID INNER JOIN  
--< Changed 2.0.3 20160421 TimPN
--                      dbo.Offering AS offer ON offer.ID = phOff.OfferingID INNER JOIN
--> Changed 2.0.3 20160421 TimPN
--                      dbo.PhenomenonUOM AS puom ON puom.ID = o.PhenonmenonUOMID INNER JOIN
--                      dbo.PhenomenonUOM AS puom ON puom.ID = o.PhenomenonUOMID INNER JOIN
--< Changed 2.0.3 20160421 TimPN
--                      dbo.Station AS st ON st.ID = sp.StationID INNER JOIN
--                      dbo.DataSource AS ds ON ds.ID = sp.DataSourceID LEFT JOIN
--                      dbo.DataSchema AS dschema1 ON dschema1.ID = ds.DataSchemaID LEFT JOIN
--                      dbo.DataSchema AS dschema ON dschema.ID = sp.DataSchemaID INNER JOIN                   
--                      dbo.ProjectSite AS ps ON ps.ID = st.ProjectSiteID INNER JOIN
--                      dbo.Organisation AS org ON org.ID = ps.OrganisationID INNER JOIN
--                      dbo.UnitOfMeasure AS uom ON uom.ID = puom.UnitOfMeasureID INNER JOIN
--                      dbo.aspnet_Users AS users ON users.UserId = o.UserId 
SELECT 
  o.ID, o.SensorID, o.PhenomenonOfferingID, o.PhenomenonUOMID, o.RawValue, o.DataValue, o.ImportBatchID, o.ValueDate, o.Comment, 
  o.UserId, aspnet_Users.UserName,
  Status.Name StatusName,
  StatusReason.Name StatusReasonName,
  Offering.ID OfferingID,
  Offering.Name OfferingName,
  UnitOfMeasure.ID UnitOfMeasureID,
  UnitOfMeasure.Unit UnitOfMeasureUnit,
  UnitOfMeasure.UnitSymbol UnitOfMeasureSymbol,
  Sensor.Name SensorName,
  Phenomenon.ID PhenomenonID,
  Phenomenon.Name PhenomenonName,
  DataSource.ID DataSourceID,
  DataSource.Name DataSourceName,
  IsNull(SensorSchema.Name, DataSourceSchema.Name) DataSchemaName,
  Instrument.ID InstrumentID,
  Instrument.Name InstrumentName,
  Station.ID StationID,
  Station.Name StationName,
  Site.ID SiteID,
  Site.Name SiteName,
  Organisation.ID OrganisationID,
  Organisation.Name OrganisationName
FROM
  Observation o
  left join Status
    on (o.StatusID = Status.ID)
  left join StatusReason
    on (o.StatusReasonID = StatusReason.ID)
  inner join PhenomenonOffering
    on (o.PhenomenonOfferingID = PhenomenonOffering.ID)
  inner join Offering
    on (PhenomenonOffering.OfferingID = Offering.ID)
  inner join PhenomenonUOM
    on (o.PhenomenonUOMID = PhenomenonUOM.ID)
  inner join UnitOfMeasure
    on (PhenomenonUOM.UnitOfMeasureID = UnitOfMeasure.ID)
  inner join Sensor 
    on (o.SensorID = Sensor.ID)
  inner join Phenomenon
    on (Sensor.PhenomenonID = Phenomenon.ID)
  left join DataSchema SensorSchema
    on (Sensor.DataSchemaID = SensorSchema.ID)
  inner join DataSource
    on (Sensor.DataSourceID = DataSource.ID)
  left join DataSchema DataSourceSchema
    on (DataSource.DataSchemaID = DataSourceSchema.ID)
  inner join Instrument_Sensor
    on (Instrument_Sensor.SensorID = Sensor.ID) and
--> Changed 2.0.22 20170111 TimPN
--	   ((Instrument_Sensor.StartDate is null) or (o.ValueDate >= Instrument_Sensor.StartDate)) and
--	   ((Instrument_Sensor.EndDate is null) or (o.ValueDate <= Instrument_Sensor.EndDate))
	   ((Instrument_Sensor.StartDate is null) or (Cast(o.ValueDate as Date) >= Instrument_Sensor.StartDate)) and
	   ((Instrument_Sensor.EndDate is null) or (Cast(o.ValueDate as Date) <= Instrument_Sensor.EndDate))
--< Changed 2.0.22 20170111 TimPN
  inner join Instrument
    on (Instrument_Sensor.InstrumentID = Instrument.ID) and
--> Changed 2.0.22 20170111 TimPN
--	   ((Instrument.StartDate is null) or (o.ValueDate >= Instrument.StartDate )) and
--	   ((Instrument.EndDate is null) or (o.ValueDate <= Instrument.EndDate))
	   ((Instrument.StartDate is null) or (Cast(o.ValueDate as Date) >= Instrument.StartDate )) and
	   ((Instrument.EndDate is null) or (Cast(o.ValueDate as Date) <= Instrument.EndDate))
--< Changed 2.0.22 20170111 TimPN
  inner join Station_Instrument
    on (Station_Instrument.InstrumentID = Instrument.ID) and
--> Changed 2.0.22 20170111 TimPN
--	   ((Station_Instrument.StartDate is null) or (o.ValueDate >= Station_Instrument.StartDate)) and
--	   ((Station_Instrument.EndDate is null) or (o.ValueDate <= Station_Instrument.EndDate))
	   ((Station_Instrument.StartDate is null) or (Cast(o.ValueDate as Date) >= Station_Instrument.StartDate)) and
	   ((Station_Instrument.EndDate is null) or (Cast(o.ValueDate as Date) <= Station_Instrument.EndDate))
--< Changed 2.0.22 20170111 TimPN
  inner join Station 
    on (Station_Instrument.StationID = Station.ID) and
--> Changed 2.0.22 20170111 TimPN
	   ((Station.StartDate is null) or (Cast(o.ValueDate as Date) >= Cast(Station.StartDate as Date))) and
	   ((Station.EndDate is null) or (Cast(o.ValueDate as Date) <= Cast(Station.EndDate as Date)))
--< Changed 2.0.22 20170111 TimPN
  inner join Site
    on (Station.SiteID = Site.ID) and
--> Changed 2.0.22 20170111 TimPN
--	   ((Site.StartDate is null) or  (Cast(o.ValueDate as Date) >= Cast(Site.StartDate as Date))) and
--	   ((Site.EndDate is null) or  (Cast(o.ValueDate as Date) <= Cast(Site.EndDate as Date)))
	   ((Site.StartDate is null) or  (Cast(o.ValueDate as Date) >= Site.StartDate)) and
	   ((Site.EndDate is null) or  (Cast(o.ValueDate as Date) <= Site.EndDate))
--< Changed 2.0.22 20170111 TimPN
  inner join Organisation_Site
    on (Organisation_Site.SiteID = Site.ID) and
--> Changed 2.0.22 20170111 TimPN
--	   ((Organisation_Site.StartDate is null) or (Cast(o.ValueDate as Date) >= Cast(Organisation_Site.StartDate as Date))) and
--	   ((Organisation_Site.EndDate is null) or (Cast(o.ValueDate as Date) <= Cast(Organisation_Site.EndDate as Date)))
	   ((Organisation_Site.StartDate is null) or (Cast(o.ValueDate as Date) >= Organisation_Site.StartDate)) and
	   ((Organisation_Site.EndDate is null) or (Cast(o.ValueDate as Date) <= Organisation_Site.EndDate))
--< Changed 2.0.22 20170111 TimPN
  inner join Organisation
    on (Organisation_Site.OrganisationID = Organisation.ID)
  inner join aspnet_Users
    on (o.UserId = aspnet_Users.UserId)
--< Changed 2.0.16 20161107 TimPN
GO
PRINT N'Refreshing [dbo].[vSensor]...';


GO
EXECUTE sp_refreshsqlmodule N'[dbo].[vSensor]';


GO
PRINT N'Refreshing [dbo].[vObservationRoles]...';


GO
EXECUTE sp_refreshsqlmodule N'[dbo].[vObservationRoles]';


GO
PRINT N'Altering [dbo].[vDataLog]...';


GO
--> Changed 2.0.3 20160503 TimPN
--Renamed SensorProcedure to Sensor
--< Changed 2.0.3 20160503 TimPN
ALTER VIEW [dbo].[vDataLog]
AS

SELECT 
d.ID, 
d.ImportDate,

--> Added 2.0.17 20161128 TimPN
Site.Name SiteName,
Station.Name StationName,
Instrument.Name InstrumentName,
--< Added 2.0.17 20161128 TimPN
--> Removed 2.0.17 20161128 TimPN
--org.Name Organisation,
--ps.[Description] ProjectSite,
--st.Name StationName,
--< Removed 2.0.17 20161128 TimPN
d.SensorID,
Sensor.Name SensorName,
CASE 
    WHEN d.SensorID is null then 1
    ELSE 0
END SensorInvalid,

d.ValueDate,
d.InvalidDateValue, 
CASE 
    WHEN ValueDate is null then 1
    ELSE 0
END DateValueInvalid,

d.InvalidTimeValue, 
CASE 
    WHEN InvalidTimeValue is not null then 1
    ELSE 0
END TimeValueInvalid,

CASE 
    WHEN InvalidDateValue is null AND InvalidTimeValue IS NULL Then ValueDate
    WHEN ValueTime is not null then ValueTime 
END ValueTime,


d.RawValue,
d.ValueText,
CASE
    WHEN d.RawValue is null then 1
    ELSE 0
END RawValueInvalid,	

d.DataValue,
d.TransformValueText, 
CASE
    WHEN d.DataValue is null then 1
    ELSE 0
END DataValueInvalid,

d.PhenomenonOfferingID, 
CASE
    WHEN d.PhenomenonOfferingID is null then 1
    ELSE 0
END OfferingInvalid,

--> Changed 2.0.3 20160421 TimPN
--d.PhenonmenonUOMID, 
d.PhenomenonUOMID, 
--< Changed 2.0.3 20160421 TimPN
CASE
--> Changed 2.0.3 20160421 TimPN
--    WHEN d.PhenonmenonUOMID is null then 1
    WHEN d.PhenomenonUOMID is null then 1
--< Changed 2.0.3 20160421 TimPN
    ELSE 0
END UOMInvalid,

p.Name PhenomenonName,
o.Name OfferingName,
uom.Unit,

d.DataSourceTransformationID,
tt.Name Transformation,
d.StatusID,
s.Name [Status],
d.ImportBatchID,
d.RawFieldValue,
d.Comment

FROM DataLog d
--> Removed 2.0.17 20161128 TimPN
--LEFT JOIN Sensor sp
--    on d.SensorID = sp.ID
--LEFT JOIN Station st
--    on sp.StationID = st.ID
--LEFT JOIN ProjectSite ps
--    on st.ProjectSiteID = ps.ID
--LEFT JOIN Organisation org
--    on ps.OrganisationID = org.ID
--< Removed 2.0.17 20161128 TimPN
--> Added 2.0.17 20161128 TimPN
  inner join Sensor 
    on (d.SensorID = Sensor.ID) 
  inner join Instrument_Sensor
    on (Instrument_Sensor.SensorID = Sensor.ID) and
--> Changed 2.0.22 20170111 TimPN
--	   ((Instrument_Sensor.StartDate is null) or (d.ValueDate >= Instrument_Sensor.StartDate)) and
--	   ((Instrument_Sensor.EndDate is null) or (d.ValueDate <= Instrument_Sensor.EndDate))
	   ((Instrument_Sensor.StartDate is null) or (Cast(d.ValueDate as Date) >= Instrument_Sensor.StartDate)) and
	   ((Instrument_Sensor.EndDate is null) or (Cast(d.ValueDate as Date) <= Instrument_Sensor.EndDate))
--< Changed 2.0.22 20170111 TimPN
  inner join Instrument
    on (Instrument_Sensor.InstrumentID = Instrument.ID) and
--> Changed 2.0.22 20170111 TimPN
--	   ((Instrument.StartDate is null) or (d.ValueDate >= Instrument.StartDate )) and
--	   ((Instrument.EndDate is null) or (d.ValueDate <= Instrument.EndDate))
	   ((Instrument.StartDate is null) or (Cast(d.ValueDate as Date) >= Instrument.StartDate )) and
	   ((Instrument.EndDate is null) or (Cast(d.ValueDate as Date) <= Instrument.EndDate))
--< Changed 2.0.22 20170111 TimPN
  inner join Station_Instrument
    on (Station_Instrument.InstrumentID = Instrument.ID) and
--> Changed 2.0.22 20170111 TimPN
--	   ((Station_Instrument.StartDate is null) or (d.ValueDate >= Station_Instrument.StartDate)) and
--	   ((Station_Instrument.EndDate is null) or (d.ValueDate <= Station_Instrument.EndDate))
	   ((Station_Instrument.StartDate is null) or (Cast(d.ValueDate as Date) >= Station_Instrument.StartDate)) and
	   ((Station_Instrument.EndDate is null) or (Cast(d.ValueDate as Date) <= Station_Instrument.EndDate))
--< Changed 2.0.22 20170111 TimPN
  inner join Station 
    on (Station_Instrument.StationID = Station.ID) and
--> Changed 2.0.22 20170111 TimPN
--	   ((Station.StartDate is null) or (Cast(d.ValueDate as Date) >= Cast(Station.StartDate as Date))) and
--	   ((Station.EndDate is null) or (Cast(d.ValueDate as Date) <= Cast(Station.EndDate as Date)))
	   ((Station.StartDate is null) or (Cast(d.ValueDate as Date) >= Station.StartDate)) and
	   ((Station.EndDate is null) or (Cast(d.ValueDate as Date) <= Station.EndDate))
--< Changed 2.0.22 20170111 TimPN
  inner join Site
    on (Station.SiteID = Site.ID) and
--> Changed 2.0.22 20170111 TimPN
--	   ((Site.StartDate is null) or  (Cast(d.ValueDate as Date) >= Cast(Site.StartDate as Date))) and
--	   ((Site.EndDate is null) or  (Cast(d.ValueDate as Date) <= Cast(Site.EndDate as Date)))
	   ((Site.StartDate is null) or  (Cast(d.ValueDate as Date) >= Site.StartDate)) and
	   ((Site.EndDate is null) or  (Cast(d.ValueDate as Date) <= Site.EndDate))
--< Changed 2.0.22 20170111 TimPN
--< Added 2.0.17 20161128 TimPN
LEFT JOIN PhenomenonOffering po
 ON d.PhenomenonOfferingID = po.ID
LEFT JOIN Phenomenon p
    on po.PhenomenonID = p.ID
LEFT JOIN Offering o
    on po.OfferingID = o.ID
LEFT JOIN PhenomenonUOM pu
--> Changed 2.0.3 20160421 TimPN
--    on d.PhenonmenonUOMID = pu.ID
    on d.PhenomenonUOMID = pu.ID
--< Changed 2.0.3 20160421 TimPN
LEFT JOIN UnitOfMeasure uom
    on pu.UnitOfMeasureID = uom.ID
LEFT JOIN DataSourceTransformation ds
    on d.DataSourceTransformationID = ds.ID
LEFT JOIN TransformationType tt
    on ds.TransformationTypeID = tt.ID
INNER JOIN [Status] s
    on d.StatusID = s.ID
GO
PRINT N'Refreshing [dbo].[vDataQuery]...';


GO
EXECUTE sp_refreshsqlmodule N'[dbo].[vDataQuery]';


GO
PRINT N'Refreshing [dbo].[vInstrumentOrganisation]...';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER OFF;


GO
EXECUTE sp_refreshsqlmodule N'[dbo].[vInstrumentOrganisation]';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER ON;


GO
PRINT N'Refreshing [dbo].[vInstrumentSensor]...';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER OFF;


GO
EXECUTE sp_refreshsqlmodule N'[dbo].[vInstrumentSensor]';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER ON;


GO
PRINT N'Altering [dbo].[vInventory]...';


GO
--> Changed 2.0.3 20160503 TimPN
--Renamed SensorProcedure to Sensor
--< Changed 2.0.3 20160503 TimPN
--> Removed 2.0.17 20161128 TimPN
--CREATE VIEW [dbo].[vInventory]
--AS
--Select 
-- ps.Name Site,
-- s.Name Station,
-- sp.Name Sensor,
-- p.Name Phenomenon,
-- d.StartDate,
-- d.EndDate
--FROM Station s with (nolock)
-- INNER Join ProjectSite ps with (nolock)
-- on  ps.ID=  s.ProjectSiteID
--INNER Join Sensor sp with (nolock)
-- on s.ID = sp.StationID
--INNER Join Phenomenon p with (nolock)
-- on  sp.PhenomenonID = p.ID 

--INNER JOIN 
--(
-- SELECT SensorID,MIN(ValueDate) StartDate,MAX(ValueDate) EndDate
--  FROM Observation with (nolock)
-- Group By SensorID
--)d
--ON sp.ID = d.SensorID
--< Removed 2.0.17 20161128 TimPN
--> Added 2.0.17 20161128 TimPN
ALTER VIEW [dbo].[vInventory]
AS
Select 
  Site.Name Site,
  Station.Name Station,
  Instrument.Name Instrument,
  Sensor.Name Sensor,
  p.Name Phenomenon,
  d.StartDate,
  d.EndDate
from
  Sensor 
  INNER JOIN 
  (
--> Changed 2.0.22 20170111 TimPN
--     SELECT SensorID,MIN(ValueDate) StartDate,MAX(ValueDate) EndDate
     SELECT SensorID,MIN(Cast(ValueDate as Date)) StartDate,MAX(Cast(ValueDate as Date)) EndDate
--< Changed 2.0.22 20170111 TimPN
     FROM Observation
     Group By SensorID
  ) d
    ON (Sensor.ID = d.SensorID)
  inner join Instrument_Sensor
    on (Instrument_Sensor.SensorID = Sensor.ID) and
	   ((Instrument_Sensor.StartDate is null) or (d.StartDate >= Instrument_Sensor.StartDate)) and
	   ((Instrument_Sensor.EndDate is null) or (d.EndDate <= Instrument_Sensor.EndDate))
  inner join Instrument
    on (Instrument_Sensor.InstrumentID = Instrument.ID) and
	   ((Instrument.StartDate is null) or (d.StartDate >= Instrument.StartDate )) and
	   ((Instrument.EndDate is null) or (d.EndDate <= Instrument.EndDate))
  inner join Station_Instrument
    on (Station_Instrument.InstrumentID = Instrument.ID) and
	   ((Station_Instrument.StartDate is null) or (d.StartDate >= Station_Instrument.StartDate)) and
	   ((Station_Instrument.EndDate is null) or (d.EndDate <= Station_Instrument.EndDate))
  inner join Station 
    on (Station_Instrument.StationID = Station.ID) and
--> Changed 2.0.22 20170111 TimPN
--	   ((Station.StartDate is null) or (Cast(d.StartDate as Date) >= Cast(Station.StartDate as Date))) and
--	   ((Station.EndDate is null) or (Cast(d.EndDate as Date) <= Cast(Station.EndDate as Date)))
	   ((Station.StartDate is null) or (d.StartDate >= Station.StartDate)) and
	   ((Station.EndDate is null) or (d.EndDate <= Station.EndDate))
--< Changed 2.0.22 20170111 TimPN
  inner join Site
    on (Station.SiteID = Site.ID) and
--> Changed 2.0.22 20170111 TimPN
--	   ((Site.StartDate is null) or  (Cast(d.StartDate as Date) >= Cast(Site.StartDate as Date))) and
--	   ((Site.EndDate is null) or  (Cast(d.EndDate as Date) <= Cast(Site.EndDate as Date)))
	   ((Site.StartDate is null) or  (d.StartDate >= Site.StartDate)) and
	   ((Site.EndDate is null) or  (d.EndDate <= Site.EndDate))
--< Changed 2.0.22 20170111 TimPN
  inner join Phenomenon p 
   on (Sensor.PhenomenonID = p.ID )
--< Added 2.0.17 20161128 TimPN
GO
PRINT N'Refreshing [dbo].[vOrganisationInstrument]...';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER OFF;


GO
EXECUTE sp_refreshsqlmodule N'[dbo].[vOrganisationInstrument]';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER ON;


GO
PRINT N'Refreshing [dbo].[vSiteOrganisation]...';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER OFF;


GO
EXECUTE sp_refreshsqlmodule N'[dbo].[vSiteOrganisation]';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER ON;


GO
PRINT N'Refreshing [dbo].[vStationInstrument]...';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER OFF;


GO
EXECUTE sp_refreshsqlmodule N'[dbo].[vStationInstrument]';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER ON;


GO
PRINT N'Refreshing [dbo].[vStationOrganisation]...';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER OFF;


GO
EXECUTE sp_refreshsqlmodule N'[dbo].[vStationOrganisation]';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER ON;


GO
PRINT N'Refreshing [dbo].[vOrganisationSite]...';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER OFF;


GO
EXECUTE sp_refreshsqlmodule N'[dbo].[vOrganisationSite]';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER ON;


GO
PRINT N'Refreshing [dbo].[vOrganisationStation]...';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER OFF;


GO
EXECUTE sp_refreshsqlmodule N'[dbo].[vOrganisationStation]';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER ON;


GO
PRINT N'Refreshing [dbo].[vProject]...';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER OFF;


GO
EXECUTE sp_refreshsqlmodule N'[dbo].[vProject]';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER ON;


GO
PRINT N'Refreshing [dbo].[vProjectStation]...';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER OFF;


GO
EXECUTE sp_refreshsqlmodule N'[dbo].[vProjectStation]';


GO
SET ANSI_NULLS, QUOTED_IDENTIFIER ON;


GO
PRINT N'Refreshing [dbo].[vStation]...';


GO
EXECUTE sp_refreshsqlmodule N'[dbo].[vStation]';


GO
PRINT N'Update complete.';


GO
