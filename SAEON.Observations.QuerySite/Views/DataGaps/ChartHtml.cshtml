@using System.Data
@using SAEON.Observations.QuerySite.Models
@using Syncfusion.JavaScript.DataVisualization
@model DataGapsModel
@(Html.EJ().Chart("chartResults")
    .PrimaryXAxis(px => px.ValueType(AxisValueType.Datetime).LabelFormat("dd MMM yyyy"))
    .PrimaryYAxis(py => py.ValueType(AxisValueType.Double))
    .Series(sr =>
    {
        foreach (var s in Model.Results.Series.Where(i => i.IsFeature && (i.Status == "Verified")))
        {
            sr.Name(s.Caption)
            .YAxisName(s.Caption)
            .Type(SeriesType.Scatter)
            .DataSource(ds => ds.URL("/DataGaps/GetChartData"))
            .XName("Date")
            .YName(s.Name)
            .Fill("#00ff00")
            .Add();
        }
        foreach (var s in Model.Results.Series.Where(i => i.IsFeature && (i.Status == "Being Verified")))
        {
            sr.Name(s.Caption)
            .Type(SeriesType.Scatter)
            .DataSource(ds => ds.URL("/DataGaps/GetChartData"))
            .XName("Date")
            .YName(s.Name)
            .Fill("#ff6600")
            .Add();
        }
        foreach (var s in Model.Results.Series.Where(i => i.IsFeature && (i.Status == "Unverified")))
        {
            sr.Name(s.Caption)
            .Type(SeriesType.Scatter)
            .DataSource(ds => ds.URL("/DataGaps/GetChartData"))
            .XName("Date")
            .YName(s.Name)
            .Fill("#ff0000")
            .Add();
        }
        foreach (var s in Model.Results.Series.Where(i => i.IsFeature && (i.Status == "No Status")))
        {
            sr.Name(s.Caption)
            .Type(SeriesType.Scatter)
            .DataSource(ds => ds.URL("/DataGaps/GetChartData"))
            .XName("Date")
            .YName(s.Name)
            .Fill("#808080")
            .Add();
        }
    })
    .Legend(lgn => lgn.Visible(true))
    .Size(sz => sz.Width("1000").Height("400"))
    //.EnableCanvasRendering(true)
    .IsResponsive(true)
    .Zooming(zm => zm
        .Enable(true)
        .EnableMouseWheel(true)
        .EnablePinching(true)
        .EnableScrollbar(true)
    )
)
@Html.EJ().ScriptManager()
