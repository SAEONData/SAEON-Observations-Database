@using SAEON.Observations.QuerySite.Models
@model QueryModel
@(Html.EJ().Grid<object>("gridResults")
    //.Datasource(ds => ds.URL("/Query/GetTableData").Adaptor(AdaptorType.UrlAdaptor))
    .Datasource(Model.Results.DataTable)
    .IsResponsive(true)
    .AllowPaging()
    .PageSettings(p => p.PageSize(50))
    .AllowFiltering()
    .FilterSettings(filter => { filter.FilterType(FilterType.Excel); })
    .AllowResizing()
    .AllowScrolling()
    .AllowSorting()
    .Columns(col =>
    {
        foreach (var s in Model.Results.Series)
        {
            if (s.Name == "Date")
                col.Field(s.Name).HeaderText(s.Caption).Format("{0:dd MMM yyyy").Add();
            else
                col.Field(s.Name).HeaderText(s.Caption).Add();
        }
    })
)
@Html.EJ().ScriptManager()
