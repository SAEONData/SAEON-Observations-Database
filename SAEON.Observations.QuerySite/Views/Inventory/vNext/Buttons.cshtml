@using SAEON.Observations.QuerySite.Models
@model InventoryModel
@{
    Html.EJ()
        .Button("btnSearch")
        .Text("Search")
        .ShowRoundedCorner(true)
        .Type(ButtonType.Button)
        .Size(ButtonSize.Medium)
        .ContentType(ContentType.TextAndImage)
        .PrefixIcon("e-icon e-search")
        .ClientSideEvents(e => e.Click("onSearchClick"))
        .Render();
}
<script type="text/javascript">
    function onSearchClick() {
        ShowWaiting();
        $.get("/Inventory/GetData")
            .done(function () {
                $("#PartialResults").load("/Query/GetResultsHtml", function () {
                    ShowResults();
                    EnableButtons();
                    HideWaiting();
                });
            })
            .fail(function (jqXHR, textStatus, errorThrown) {
                ErrorInFunc("Error in DataQuery Status: " + textStatus + " Error: " + errorThrown)
            });
    }
    function ErrorInFunc(msg) {
        HideWaiting();
        alert(msg);
    }
    function EnableButtons() {
        var btnSearch = $("#btnSearch").data("ejButton");
        btnSearch.enable();
    }
    function DisableButtons() {
        var btnSearch = $("#btnSearch").data("ejButton");
        btnSearch.disable();
    }
    function ShowResults() {
        $("#ResultsTab").removeClass("hidden");
    }
    function HideResults() {
        $("#ReulstsTab").addClass("hidden");
    }
</script>
